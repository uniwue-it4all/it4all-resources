{
  "type": "array",
  "items": {"$ref": "#/definitions/UmlExercise"},
  "definitions": {
    "UmlExercise": {
      "allOf": [
        {"$ref": "../exercise.schema.json"},
        {
          "properties": {
            "mappings": {"type": "array", "items": {"$ref": "#/definitions/UmlMapping"}},
            "ignoreWords": {"type": "array", "items": {"type": "string"}},
            "samples": {"type": "array", "items": {"$ref": "#/definitions/UmlClassDiagram"}}
          },
          "required": ["mappings", "ignoreWords", "samples"],
          "additionalProperties": false
        }
      ]
    },
    "UmlMapping": {
      "type": "object",
      "properties": {
        "key": {"type": "string"},
        "value": {"type": "string"}
      },
      "required": ["key", "value"]
    },
    "UmlClassDiagram": {
      "type": "object",
      "properties": {
        "id": {"type": "number"},
        "classes": {"type": "array", "items": {"$ref": "#/definitions/UmlClass"}},
        "associations": {"type": "array", "items": {"$ref": "#/definitions/UmlAssoc"}},
        "implementations": {"type": "array", "items": {"$ref": "#/definitions/UmlImpls"}}
      },
      "required": ["id", "classes", "associations", "implementations"]
    },
    "UmlClass": {
      "type": "object",
      "properties": {
        "classType": {"type": "string", "enum": ["CLASS", "ABSTRACT", "INTERFACE"]},
        "name": {"type": "string"},
        "attributes": {"type": "array", "items": {"$ref": "#/definitions/UmlAttribute"}},
        "methods": {"type": "array", "items": {"$ref": "#/definitions/UmlMethod"}}
      },
      "required": ["classType", "name"]
    },
    "UmlAttribute": {
      "type": "object",
      "properties": {
        "visibility": {
          "type": "string",
          "enum": ["public", "private", "package", "protected"]
        },
        "name": {"type": "string"},
        "type": {"type": "string", "enum": ["String", "int", "double"]}
      },
      "required": ["visibility", "name", "type"]
    }
  }
}
