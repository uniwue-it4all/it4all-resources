{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "classes": {"type": "array", "items": {"$ref": "#/definitions/UmlClass"}},
    "associations": {"type": "array", "items": {"$ref": "#/definitions/UmlAssociation"}},
    "implementations": {"type": "array", "items": {"$ref": "#/definitions/UmlImplementation"}}
  },
  "required": ["classes", "associations", "implementations"],
  "additionalProperties": false,
  "definitions": {
    "UmlClass": {
      "type": "object",
      "properties": {
        "classType": {"enum": ["CLASS", "ABSTRACT", "INTERFACE"]},
        "name": {"type": "string"},
        "attributes": {"type": "array", "items": {"$ref": "#/definitions/UmlAttribute"}},
        "methods": {"type": "array", "items": {"$ref": "#/definitions/UmlMethod"}}
      },
      "required": ["classType", "name", "attributes", "methods"]
    },
    "UmlClassMember": {
      "type": "object",
      "properties": {
        "visibility": {"enum": ["public", "private", "package", "protected"]},
        "memberName": {"type": "string"},
        "memberType": {"enum": ["void", "boolean", "int", "float", "string"]},
        "isStatic": {"type": "boolean", "default": false},
        "isAbstract": {"type": "boolean", "default": false}
      },
      "required": ["visibility", "memberName", "memberType", "isStatic", "isAbstract"]
    },
    "UmlAttribute": {
      "allOf": [
        {"$ref": "#/definitions/UmlClassMember"},
        {
          "type": "object",
          "properties": {
            "isDerived": {"type": "boolean", "default": false}
          },
          "required": ["isDerived"],
          "additionalProperties": false
        }
      ]
    },
    "UmlMethod": {
      "allOf": [
        {"$ref": "#/definitions/UmlClassMember"},
        {
          "type": "object",
          "properties": {
            "parameters": {"type": "string"}
          },
          "required": ["parameters"],
          "additionalProperties": false
        }
      ]
    },
    "UmlAssociation": {
      "type": "object",
      "properties": {
        "assocType": {"enum": ["AGGREGATION", "ASSOCIATION", "COMPOSITION"]},
        "firstEnd": {"type": "string"},
        "secondEnd": {"type": "string"},
        "firstMult": {"$ref": "#/definitions/UmlMultiplicity"},
        "secondMult": {"$ref": "#/definitions/UmlMultiplicity"}
      },
      "required": ["assocType", "firstEnd", "secondEnd", "firstMult", "secondMult"],
      "additionalProperties": false
    },
    "UmlImplementation": {
      "type": "object",
      "properties": {
        "subClass": {"type": "string"},
        "superClass": {"type": "string"}
      },
      "required": ["subClass", "superClass"],
      "additionalProperties": false
    },
    "UmlMultiplicity": {
      "enum": ["SINGLE", "UNBOUND"]
    }
  }
}